var VehicleCtrl=["$scope","$routeParams","$location","vehicleService","menuService","genericService","userService","$rootScope","participantService",function(a,b,c,d,e,f,g,h,i){a.continuePressed=!1,a.path=c.path(),a.isLoaded=!1,f.refreshPage(function(){h.currentScope=a}),a.showErrors=!1,d.vehicleForm.get({UserId:b.userId},function(b){typeof b.Id=="undefined"||b.Id==0?(a.vehicleForm=$.jStorage.get(a.path),a.showErrors=!0):a.vehicleForm=b,a.isLoaded=!0}),i.custody.get({UserId:b.userId},function(b){a.custodianNames=b.CustodyInformation.CustodianNames}),d.vehicles.get({UserId:b.userId},function(b){b.Vehicles.length==0?a.vehicles=[]:a.vehicles=b.Vehicles}),a.submit=function(){if(a.vehicleFormForm.$invalid){e.setSubMenuIconClass(a.path,"icon-exclamation icon-red");var b=f.getFormInput("#vehicleFormForm");$.jStorage.set(a.path,b);return}$.jStorage.deleteKey(a.path),a.vehicleForm.UserId=g.getFormUserId(),typeof a.vehicleForm.Id=="undefined"||a.vehicleForm.Id==0?d.vehicleForm.save(null,a.vehicleForm,function(){e.setSubMenuIconClass(a.path,"icon-ok icon-green")}):d.vehicleForm.update(null,a.vehicleForm,function(){e.setSubMenuIconClass(a.path,"icon-ok icon-green")})},a.addVehicle=function(){if(a.addVehicleForm.$invalid){a.showAddVehicleErrors=!0;return}a.showAddVehicleErrors=!1,a.vehicle.UserId=g.getFormUserId(),a.vehicle.vehicleFormId=a.vehicleForm.Id,d.vehicles.save(null,a.vehicle,function(b){e.setSubMenuIconClass(a.path,"icon-ok icon-green"),a.vehicles.push(b.Vehicle),a.addVehicleForm.$setPristine(),a.vehicle=""})},a.deleteVehicle=function(b){d.vehicles.delete({Id:b.Id},function(){a.vehicles=_.reject(a.vehicles,function(a){return a.Id==b.Id})})},a.editing=!1,a.editVehicle=function(b){a.editing=!0,a.editVehicleId=b.Id},a.doneEdit=function(b){a.editing=!1,a.editVehicleId=0,d.vehicles.update({},b,function(){})},a.continue=function(){a.vehicleForm.$invalid?e.setSubMenuIconClass(a.path,"icon-exclamation icon-red"):e.setSubMenuIconClass(a.path,"icon-ok icon-green"),e.nextMenu()}}]