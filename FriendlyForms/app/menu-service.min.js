FormsApp.factory("menuService",function(a,b,c){var d={menuItems:[],isInitialized:!1,setItems:function(a){d.menuItems=a},menu:c("/api/menus/:userId",{userId:"@userId"},{getList:{method:"GET",isArray:!0,params:{format:"json"}}}),getMenu:function(b){var c=d.userId;typeof c=="undefined"&&(c=0),d.menu.getList({Route:a.path(),UserId:c},function(a){d.setItems(a),d.isInitialized=!0,b&&b()})},setSubMenuIconClass:function(a,b,c){var e=_.find(d.menuItems,function(b){return b.pathIdentifier===a}),f=_.find(e.subMenuItems,function(a){return a.pathIdentifier===b});f.iconClass=c},isActive:function(a,b){if(d.isInitialized){var c=_.find(d.menuItems,function(b){return b.pathIdentifier===a}),e=_.find(c.subMenuItems,function(a){return a.pathIdentifier===b});return e.itemClass==="active"}return!1},setActive:function(a,b){d.isInitialized?d.setActiveCallback(a,b)():d.getMenu(d.setActiveCallback(a,b))},setActiveCallback:function(b,c){return function(){d.checkForm(),d.clearActive();var e=_.find(d.menuItems,function(a){return a.pathIdentifier===b});if(c===null)e.itemClass="active";else{e.showSubMenu=!0,e.itemClass="submenu active";var f=_.find(e.subMenuItems,function(a){return a.pathIdentifier===c});f.itemClass="active",f.iconClass="icon-blue icon-pencil",a.path(f.path)}}},clearActive:function(){angular.forEach(d.menuItems,function(a){for(var b=0;b<a.subMenuItems.length;b++)a.subMenuItems[b].itemClass="";a.itemClass=""})},checkForm:function(){var a;for(var c=0;c<d.menuItems.length;c++){var e=d.menuItems[c];a=_.find(e.subMenuItems,function(a){return a.iconClass==="icon-blue icon-pencil"});if(a){var f=b.$root.currentScope;f.submit(!0);break}}},userId:0};return d})