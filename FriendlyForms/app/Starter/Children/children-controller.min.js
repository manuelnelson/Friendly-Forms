var ChildrenCtrl=function(a,b,c,d,e,f,g){a.continuePressed=!1,a.path=c.path(),a.showErrors=!1,f.refreshPage(function(){g.currentScope=a}),a.childForm=d.childForm.get({UserId:b.userId},function(){if(typeof a.childForm.Id=="undefined"||a.childForm.Id==0)a.childForm=$.jStorage.get(a.path),a.childForm&&(a.showErrors=!0)}),d.child.get({UserId:b.userId},function(b){b.Children.length==0?a.children=[]:a.children=b.Children}),a.submit=function(){if(!a.childForm||a.childForm.ChildrenInvolved!=1&&a.childForm.ChildrenInvolved!=2){e.setSubMenuIconClass(a.path,"icon-pencil icon-red");var c=f.getFormInput("#childForm");$.jStorage.set(a.path,c);return}$.jStorage.deleteKey(a.path),a.childForm.UserId=b.userId,typeof a.childForm.Id=="undefined"||a.childForm.Id==0?d.childForm.save(null,a.childForm,function(b){e.setSubMenuIconClass(a.path,"icon-ok icon-green"),a.childForm=b.ChildForm}):d.childForm.update(null,a.childForm,function(){e.setSubMenuIconClass(a.path,"icon-ok icon-green")})},a.addChild=function(){a.child.UserId=b.userId,a.child.ChildFormId=a.childForm.Id,d.child.save(null,a.child,function(b){e.setSubMenuIconClass(a.path,"icon-ok icon-green"),a.children.push(b.Child),a.addChildForm.$setPristine(),a.child=""})},a.editing=!1,a.editChild=function(b){a.editing=!0,a.editChildId=b.Id},a.doneEdit=function(b){a.editing=!1,a.editChildId=0,b.DateOfBirth=b.DateOfBirthString,d.child.update({},b,function(){})},a.deleteChild=function(b){d.child.delete({Id:b.Id},function(){a.children=_.reject(a.children,function(a){return a.Id==b.Id})})},a.continue=function(){a.continuePressed=!0},a.nextForm=function(){e.nextMenu()}};ChildrenCtrl.$inject=["$scope","$routeParams","$location","childService","menuService","genericService","$rootScope"]