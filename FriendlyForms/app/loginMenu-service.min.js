FormsApp.factory("loginMenuService",["$resource","menuService","userService","$q","$route","$location",function(a,b,c,d,e,f){var g={auth:a("/api/auth/logout",{},{get:{method:"GET",cache:!1,params:{format:"json"}}}),refresh:function(a){var f=d.defer();return c.getCurrentUserSession().then(function(c){c!=null&&c.IsAuthenticated?(g.authUser=c,typeof e.current.params.userId=="undefined"&&!a&&(a=c.CustomId),b.getMenu(a).then(function(){f.resolve()})):(g.authUser=null,b.getMenu().then(function(){f.resolve()}))}),f.promise},logoff:function(){var a=d.defer();return g.auth.save(null,{},function(b){return a.resolve(b)}),a.promise}};return g}])