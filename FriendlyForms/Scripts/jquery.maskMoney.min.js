(function(a){a.browser||(a.browser={},a.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),a.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),a.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),a.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()));var b={destroy:function(){var b=a(this);return b.unbind(".maskMoney"),a.browser.msie&&(this.onpaste=null),this},mask:function(){return this.trigger("mask")},init:function(b){return b=a.extend({symbol:"",symbolStay:!1,thousands:",",decimal:".",precision:2,defaultZero:!0,allowZero:!1,allowNegative:!1},b),this.each(function(){function e(){d=!0}function f(){d=!1}function g(b){b=b||window.event;var g=b.which||b.charCode||b.keyCode;if(g==undefined)return!1;if(g<48||g>57)return g==45?(e(),c.val(r(c)),!1):g==43?(e(),c.val(c.val().replace("-","")),!1):g==13||g==9?(d&&(f(),a(this).change()),!0):!a.browser.mozilla||g!=37&&g!=39||b.charCode!=0?(l(b),!0):!0;if(h(c))return!1;l(b);var i=String.fromCharCode(g),j=c.get(0),k=t(j),n=k.start,o=k.end;return j.value=j.value.substring(0,n)+i+j.value.substring(o,j.value.length),m(j,n+1),e(),!1}function h(a){var b=a.val().length>=a.attr("maxlength")&&a.attr("maxlength")>=0,c=t(a.get(0)),d=c.start,e=c.end,f=c.start!=c.end&&a.val().substring(d,e).match(/\d/)?!0:!1;return b&&!f}function i(b){b=b||window.event;var g=b.which||b.charCode||b.keyCode;if(g==undefined)return!1;var h=c.get(0),i=t(h),j=i.start,k=i.end;return g==8?(l(b),j==k?(h.value=h.value.substring(0,j-1)+h.value.substring(k,h.value.length),j-=1):h.value=h.value.substring(0,j)+h.value.substring(k,h.value.length),m(h,j),e(),!1):g==9?(d&&(a(this).change(),f()),!0):g==46||g==63272?(l(b),h.selectionStart==h.selectionEnd?h.value=h.value.substring(0,j)+h.value.substring(k+1,h.value.length):h.value=h.value.substring(0,j)+h.value.substring(k,h.value.length),m(h,j),e(),!1):!0}function j(a){var d=p();c.val()==d?c.val(""):c.val()==""&&b.defaultZero?c.val(q(d)):c.val(q(c.val()));if(this.createTextRange){var e=this.createTextRange();e.collapse(!1),e.select()}}function k(d){a.browser.msie&&g(d),c.val()==""||c.val()==q(p())||c.val()==b.symbol?b.allowZero?b.symbolStay?c.val(q(p())):c.val(p()):c.val(""):b.symbolStay?b.symbolStay&&c.val()==b.symbol&&c.val(q(p())):c.val(c.val().replace(b.symbol,""))}function l(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function m(a,b){var d=c.val().length;c.val(o(a.value));var e=c.val().length;b-=d-e,s(c,b)}function n(){var a=c.val();c.val(o(a))}function o(a){a=a.replace(b.symbol,"");var c="0123456789",d=a.length,e="",f="",g="";d!=0&&a.charAt(0)=="-"&&(a=a.replace("-",""),b.allowNegative&&(g="-"));if(d==0){if(!b.defaultZero)return f;f="0.00"}for(var h=0;h<d;h++)if(a.charAt(h)!="0"&&a.charAt(h)!=b.decimal)break;for(;h<d;h++)c.indexOf(a.charAt(h))!=-1&&(e+=a.charAt(h));var i=parseFloat(e);i=isNaN(i)?0:i/Math.pow(10,b.precision),f=i.toFixed(b.precision),h=b.precision==0?0:1;var j,k=(f=f.split("."))[h].substr(0,b.precision);for(j=(f=f[0]).length;(j-=3)>=1;)f=f.substr(0,j)+b.thousands+f.substr(j);return b.precision>0?q(g+f+b.decimal+k+Array(b.precision+1-k.length).join(0)):q(g+f)}function p(){var a=parseFloat("0")/Math.pow(10,b.precision);return a.toFixed(b.precision).replace(new RegExp("\\.","g"),b.decimal)}function q(a){if(b.symbol!=""){var c="";a.length!=0&&a.charAt(0)=="-"&&(a=a.replace("-",""),c="-"),a.substr(0,b.symbol.length)!=b.symbol&&(a=c+b.symbol+a)}return a}function r(a){var c=a.val();return b.allowNegative?c!=""&&c.charAt(0)=="-"?c.replace("-",""):"-"+c:c}function s(b,c){return a(b).each(function(a,b){if(b.setSelectionRange)b.focus(),b.setSelectionRange(c,c);else if(b.createTextRange){var d=b.createTextRange();d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",c),d.select()}}),this}function t(a){var b=0,c=0,d,e,f,g,h;return typeof a.selectionStart=="number"&&typeof a.selectionEnd=="number"?(b=a.selectionStart,c=a.selectionEnd):(e=document.selection.createRange(),e&&e.parentElement()==a&&(g=a.value.length,d=a.value.replace(/\r\n/g,"\n"),f=a.createTextRange(),f.moveToBookmark(e.getBookmark()),h=a.createTextRange(),h.collapse(!1),f.compareEndPoints("StartToEnd",h)>-1?b=c=g:(b=-f.moveStart("character",-g),b+=d.slice(0,b).split("\n").length-1,f.compareEndPoints("EndToEnd",h)>-1?c=g:(c=-f.moveEnd("character",-g),c+=d.slice(0,c).split("\n").length-1)))),{start:b,end:c}}var c=a(this),d=!1;c.attr("readonly")||(c.unbind(".maskMoney"),c.bind("keypress.maskMoney",g),c.bind("keydown.maskMoney",i),c.bind("blur.maskMoney",k),c.bind("focus.maskMoney",j),c.bind("mask.maskMoney",n))})}};a.fn.maskMoney=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="object"||!c)return b.init.apply(this,arguments);a.error("Method "+c+" does not exist on jQuery.maskMoney")}})(jQuery)