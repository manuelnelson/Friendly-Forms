window.Parenting=window.Parenting||{},Parenting.AddDecision=function(a){var b="decisions";if(!$("#"+b).valid())return!1;Parenting.SaveExtraDecisions(),a!=null&&$(a).hasClass("next")?Friendly.childNdx++:a!=null&&Friendly.childNdx--;var c=Friendly.GetFormInput(b);return c.ChildId=$("#childId").val().trim(),a!=null&&$(a).hasClass("next")&&Friendly.childNdx===Friendly.children.length?(Friendly.SubmitForm(b,"responsibility",c),!1):a!=null&&$(a).hasClass("previous")&&Friendly.childNdx<0?(Friendly.SubmitForm(b,"information",c),!1):($.ajax({url:"/api/"+b+"/?format=json",type:"POST",data:c,success:function(){$("html, body").animate({scrollTop:0},"fast"),$("input[id=DecisionsViewModel_Education]").removeAttr("checked"),$("input[id=DecisionsViewModel_HealthCare]").removeAttr("checked"),$("input[id=DecisionsViewModel_Religion]").removeAttr("checked"),$("input[id=DecisionsViewModel_ExtraCurricular]").removeAttr("checked");var a=Friendly.children[Friendly.childNdx];Parenting.GetChildDecisions(a)},error:Friendly.GenericErrorMessage}),!0)},Parenting.CheckChildDecision=function(a,b){$.ajax({url:"/api/Decisions?ChildId="+a.Id+"&format=json",type:"GET",success:function(c){return $("#childName").text(a.Name),$("#childId").val(a.Id),$('#DecisionsViewModel_Education[value="'+c.Decisions.Education+'"]').attr("checked","checked"),$('#DecisionsViewModel_HealthCare[value="'+c.Decisions.HealthCare+'"]').attr("checked","checked"),$('#DecisionsViewModel_Religion[value="'+c.Decisions.Religion+'"]').attr("checked","checked"),$('#DecisionsViewModel_ExtraCurricular[value="'+c.Decisions.ExtraCurricular+'"]').attr("checked","checked"),$("#DecisionsViewModel_BothResolve").val(c.Decisions.BothResolve),$(".extra-decision-item").remove(),Friendly.childNdx++,Friendly.childNdx===Friendly.children.length?$("#decisions").valid()?(Friendly.NextForm(b,Friendly.properties.iconSuccess),!1):(Friendly.NextForm(b,Friendly.properties.iconError),!1):$("#decisions").valid()?(Parenting.CheckChildDecision(Friendly.children[Friendly.childNdx],b),!1):(Friendly.NextForm(b,Friendly.properties.iconError),!1)},error:Friendly.GenericErrorMessage})},Parenting.CheckChildHoliday=function(a,b){$.ajax({url:"/api/Holiday/"+a.Id+"?format=json",type:"GET",success:function(c){return Parenting.SetChildHolidayForm(c,a),Friendly.childNdx++,Friendly.childNdx===Friendly.children.length?$("#holiday").valid()?(Friendly.NextForm(b,Friendly.properties.iconSuccess),!1):(Friendly.NextForm(b,Friendly.properties.iconError),!1):$("#holiday").valid()?(Parenting.CheckChildHoliday(Friendly.children[Friendly.childNdx],b),!1):(Friendly.NextForm(b,Friendly.properties.iconError),!1)},error:Friendly.GenericErrorMessage})},Parenting.SaveExtraDecisions=function(a){var b="extraDecisions";$.each($(".extra-decision-item"),function(c,d){var e=$(d).children("#extra-decision-Id").val(),f={Id:typeof a=="undefined"?e:0,ChildId:typeof a=="undefined"?$(d).children("#extra-decision-childId").val():a,DecisionMaker:$(d).find("input[name=ExtraDecisions"+e+"]:checked").val(),Description:$(d).children("#extra-decision-description").text().trim(),UserId:$("#user-id").val()};if(typeof a!="undefined"){$.ajax({url:"/api/"+b+"/"+a+"?format=json",type:"GET",success:function(a){$.each(a,function(a,b){b.Description===f.Description&&(f.Id=b.Id)}),$.ajax({url:"/api/"+b+"/?format=json",type:"POST",data:f,success:function(){},error:Friendly.GenericErrorMessage})},error:Friendly.GenericErrorMessage});return}$.ajax({url:"/api/"+b+"/?format=json",type:"POST",data:f,success:function(){},error:Friendly.GenericErrorMessage})})},Parenting.AddHoliday=function(a){var b="holiday";if($("#"+b).valid()){Parenting.SaveExtraHolidays();var c=Friendly.GetFormInput(b);return c.ChildId=$("#holidayChildId").val(),a!=null&&$(a).hasClass("next")?Friendly.childNdx++:a!=null&&Friendly.childNdx--,a!=null&&$(a).hasClass("next")&&Friendly.childNdx===Friendly.children.length&&Friendly.SubmitForm("holiday","addendum",c),a!=null&&$(a).hasClass("previous")&&Friendly.childNdx<0?(Friendly.SubmitForm("holiday","schedule",c),!1):(Friendly.StartLoading(),$.ajax({url:"/api/"+b+"?format=json",type:"POST",data:c,success:function(){$("#"+b)[0].reset(),$("html, body").animate({scrollTop:0},"fast");var a=Friendly.children[Friendly.childNdx];Parenting.GetChildHoliday(a),Friendly.EndLoading()},error:Friendly.GenericErrorMessage}),!0)}},Parenting.GetChildDecisions=function(a){$.ajax({url:"/api/Decisions?ChildId="+a.Id+"&format=json",type:"GET",success:function(b){$("#childName").text(a.Name),$("#childId").val(a.Id),$('#DecisionsViewModel_Education[value="'+b.Decisions.Education+'"]').attr("checked","checked"),$('#DecisionsViewModel_HealthCare[value="'+b.Decisions.HealthCare+'"]').attr("checked","checked"),$('#DecisionsViewModel_Religion[value="'+b.Decisions.Religion+'"]').attr("checked","checked"),$('#DecisionsViewModel_ExtraCurricular[value="'+b.Decisions.ExtraCurricular+'"]').attr("checked","checked"),$("#DecisionsViewModel_BothResolve").val(b.Decisions.BothResolve),$(".extra-decision-item").remove(),$.each(b.ExtraDecisions,function(a,b){var c=$("#friendly-extraDecisions-template").tmpl(b);$("#radio-decisions").append(c)}),Parenting.CheckIfBothIsChecked(),b.Decisions.Education!==0&&$("#decisions").valid(),$("#decisionsWrapper").show()},error:Friendly.GenericErrorMessage})},Parenting.CheckIfBothIsChecked=function(){var a=!1;$.each($("#decisions input[type=radio]"),function(b,c){var d=$(c).attr("id");$("#"+d+":checked").val()==="3"&&(a=!0)}),a?$(".decision-details").show():($("#DecisionsViewModel_BothResolve").val(""),$(".decision-details").hide())},Parenting.LoadChildren=function(a){Friendly.children=[],$(".copy-button ul").empty(),$(".copy-button ul").append('<li><a title="all" data-id="0">All</a></li>'),$.each($(".child-table tbody tr"),function(a,b){var c={Name:$(b).find(".child-name").text(),DateOfBirth:$(b).find(".child-dob").text(),Id:$(b).find(".child-id").text().trim()};Friendly.children.push(c),$(".copy-button ul").append('<li><a data-id="'+c.Id+'">'+c.Name+"</a></li>")}),Friendly.children.length<=1&&$(".copy-wrapper").hide(),Friendly.childNdx=0;var b=Friendly.children[Friendly.childNdx];switch(a){case"decision":Parenting.GetChildDecisions(b);break;case"holiday":Parenting.GetChildHoliday(b)}},Parenting.GetChildHoliday=function(a){$.ajax({url:"/api/Holiday/"+a.Id+"?format=json",type:"GET",success:function(b){Parenting.SetChildHolidayForm(b,a),typeof b.Holidays!="undefined"&&b.Holidays.SpringBreakFather!==0&&$("#holiday").valid(),$("#holidayWrapper").show(),$(".holiday-item").addClass("active")},error:Friendly.GenericErrorMessage})},Parenting.SetChildHolidayForm=function(a,b){Friendly.ClearForm("holiday"),$("#holidayChildName").text(b.Name),$("#holidayChildId").val(b.Id);if(typeof a.Holidays=="undefined")return!1;a.Holidays.FridayHoliday?($("#HolidayViewModel_FridayHoliday").attr("checked","checked"),$("#HolidayViewModel_FridayHoliday").val("true")):$("#HolidayViewModel_FridayHoliday").val("false"),a.Holidays.MondayHoliday?($("#HolidayViewModel_MondayHoliday").attr("checked","checked"),$("#HolidayViewModel_MondayHoliday").val("true")):$("#HolidayViewModel_MondayHoliday").val("false"),$('#HolidayViewModel_Thanksgiving[value="'+a.Holidays.Thanksgiving+'"]').attr("checked","checked"),$("#HolidayViewModel_ThanksgivingOther").val(a.Holidays.ThanksgivingOther),$('#HolidayViewModel_Christmas[value="'+a.Holidays.Christmas+'"]').attr("checked","checked"),$("#HolidayViewModel_ChristmasTime").val(a.Holidays.ChristmasTime),$("#HolidayViewModel_SpringBreakTime").val(a.Holidays.SpringBreakTime),$("#HolidayViewModel_FallBreakTime").val(a.Holidays.FallBreakTime),$("#HolidayViewModel_ThanksgivingTime").val(a.Holidays.ThanksgivingTime),$("#HolidayViewModel_ChristmasOther").val(a.Holidays.ChristmasOther),$('#HolidayViewModel_SpringBreak[value="'+a.Holidays.SpringBreak+'"]').attr("checked","checked"),$("#HolidayViewModel_SpringOther").val(a.Holidays.SpringOther),$("#HolidayViewModel_SummerBeginDays").val(a.Holidays.SummerBeginDays),$("#HolidayViewModel_SummerBeginTime").val(a.Holidays.SummerBeginTime),$("#HolidayViewModel_SummerEndDays").val(a.Holidays.SummerEndDays),$("#HolidayViewModel_SummerEndTime").val(a.Holidays.SummerEndTime),$("#HolidayViewModel_SummerDetails").val(a.Holidays.SummerDetails),$('#HolidayViewModel_FallBreak[value="'+a.Holidays.FallBreak+'"]').attr("checked","checked"),$("#HolidayViewModel_FallOther").val(a.Holidays.FallOther),$('#HolidayViewModel_SpringBreakFather[value="'+a.Holidays.SpringBreakFather+'"]').attr("checked","checked"),$('#HolidayViewModel_SpringBreakMother[value="'+a.Holidays.SpringBreakMother+'"]').attr("checked","checked"),$('#HolidayViewModel_FallBreakFather[value="'+a.Holidays.FallBreakFather+'"]').attr("checked","checked"),$('#HolidayViewModel_FallBreakMother[value="'+a.Holidays.FallBreakMother+'"]').attr("checked","checked"),$('#HolidayViewModel_ThanksgivingFather[value="'+a.Holidays.ThanksgivingFather+'"]').attr("checked","checked"),$('#HolidayViewModel_ThanksgivingMother[value="'+a.Holidays.ThanksgivingMother+'"]').attr("checked","checked"),$('#HolidayViewModel_ChristmasFather[value="'+a.Holidays.ChristmasFather+'"]').attr("checked","checked"),$('#HolidayViewModel_ChristmasMother[value="'+a.Holidays.ChristmasMother+'"]').attr("checked","checked"),$('#HolidayViewModel_MlkFather[value="'+a.Holidays.MlkFather+'"]').attr("checked","checked"),$('#HolidayViewModel_MlkMother[value="'+a.Holidays.MlkMother+'"]').attr("checked","checked"),$('#HolidayViewModel_PresidentsFather[value="'+a.Holidays.PresidentsFather+'"]').attr("checked","checked"),$('#HolidayViewModel_PresidentsMother[value="'+a.Holidays.PresidentsMother+'"]').attr("checked","checked"),$('#HolidayViewModel_MothersFather[value="'+a.Holidays.MothersFather+'"]').attr("checked","checked"),$('#HolidayViewModel_MothersMother[value="'+a.Holidays.MothersMother+'"]').attr("checked","checked"),$('#HolidayViewModel_MemorialFather[value="'+a.Holidays.MemorialFather+'"]').attr("checked","checked"),$('#HolidayViewModel_MemorialMother[value="'+a.Holidays.MemorialMother+'"]').attr("checked","checked"),$('#HolidayViewModel_FathersFather[value="'+a.Holidays.FathersFather+'"]').attr("checked","checked"),$('#HolidayViewModel_FathersMother[value="'+a.Holidays.FathersMother+'"]').attr("checked","checked"),$('#HolidayViewModel_IndependenceFather[value="'+a.Holidays.IndependenceFather+'"]').attr("checked","checked"),$('#HolidayViewModel_IndependenceMother[value="'+a.Holidays.IndependenceMother+'"]').attr("checked","checked"),$('#HolidayViewModel_LaborFather[value="'+a.Holidays.LaborFather+'"]').attr("checked","checked"),$('#HolidayViewModel_LaborMother[value="'+a.Holidays.LaborMother+'"]').attr("checked","checked"),$('#HolidayViewModel_HalloweenFather[value="'+a.Holidays.HalloweenFather+'"]').attr("checked","checked"),$('#HolidayViewModel_HalloweenMother[value="'+a.Holidays.HalloweenMother+'"]').attr("checked","checked"),$('#HolidayViewModel_ChildrensFather[value="'+a.Holidays.ChildrensFather+'"]').attr("checked","checked"),$('#HolidayViewModel_ChildrensMother[value="'+a.Holidays.ChildrensMother+'"]').attr("checked","checked"),$('#HolidayViewModel_MothersBdayFather[value="'+a.Holidays.MothersBdayFather+'"]').attr("checked","checked"),$('#HolidayViewModel_MothersBdayMother[value="'+a.Holidays.MothersBdayMother+'"]').attr("checked","checked"),$('#HolidayViewModel_FathersBdayFather[value="'+a.Holidays.FathersBdayFather+'"]').attr("checked","checked"),$('#HolidayViewModel_FathersBdayMother[value="'+a.Holidays.FathersBdayMother+'"]').attr("checked","checked"),$('#HolidayViewModel_ReligiousFather[value="'+a.Holidays.ReligiousFather+'"]').attr("checked","checked"),$('#HolidayViewModel_ReligiousMother[value="'+a.Holidays.ReligiousMother+'"]').attr("checked","checked"),$(".extra-holiday-item").remove(),$.each(a.ExtraHolidays,function(a,b){var c=$("#friendly-extraHolidays-template").tmpl(b);$("#holiday").append(c)})},Parenting.SaveExtraHolidays=function(a){var b="extraHoliday";$.each($(".extra-holiday-item"),function(c,d){var e=$(d).children("#extra-holiday-Id").val(),f={Id:typeof a=="undefined"?e:0,ChildId:typeof a=="undefined"?$(d).children("#extra-holiday-childId").val():a,HolidayFather:$(d).find("input[name=HolidayFather"+e+"]:checked").val(),HolidayMother:$(d).find("input[name=HolidayMother"+e+"]:checked").val(),HolidayName:$(d).children(".extra-holiday-name").text(),UserId:$("#user-id").val()};if(typeof a!="undefined"){$.ajax({url:"/api/"+b+"/"+a+"?format=json",type:"GET",success:function(a){$.each(a.ExtraHolidays,function(a,b){b.HolidayName===f.HolidayName&&(f.Id=b.Id)}),$.ajax({url:"/api/"+b+"?format=json",type:"POST",data:f,success:function(){},error:Friendly.GenericErrorMessage})},error:Friendly.GenericErrorMessage});return}$.ajax({url:"/api/"+b+"?format=json",type:"POST",data:f,success:function(){},error:Friendly.GenericErrorMessage})})}