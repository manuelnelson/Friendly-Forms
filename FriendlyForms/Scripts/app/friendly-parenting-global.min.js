window.Parenting=window.Parenting||{},Parenting.AddDecision=function(a){var b="decisions";a!=null&&$(a).hasClass("next")?Friendly.childNdx++:a!=null&&Friendly.childNdx--;var c=Friendly.GetFormInput(b);c.ChildId=$("#childId").val().trim();var d=b+c.ChildId;if(!$("#"+b).valid()){var e={Decisions:c,ExtraDecisions:[]};return $.each($(".extra-decision-item"),function(a,b){var d=$(b).children("#extra-decision-Id").val(),f={Id:typeof c.ChildId=="undefined"?d:0,ChildId:typeof c.ChildId=="undefined"?$(b).children("#extra-decision-childId").val():c.ChildId,DecisionMaker:$(b).find("input[name=ExtraDecisions"+d+"]:checked").val(),Description:$(b).children("#extra-decision-description").text().trim()};e.ExtraDecisions.push(f)}),$.jStorage.set(d,e),!1}return $.jStorage.deleteKey(d),Parenting.SaveExtraDecisions(),a!=null&&$(a).hasClass("next")&&Friendly.childNdx===Friendly.children.length?(Friendly.SubmitForm(b,"responsibility",c),!1):a!=null&&$(a).hasClass("previous")&&Friendly.childNdx<0?(Friendly.SubmitForm(b,"information",c),!1):($.ajax({url:"/api/"+b+"/?format=json",type:"POST",data:c,success:function(){$("html, body").animate({scrollTop:0},"fast");var a=Friendly.children[Friendly.childNdx];Parenting.GetChildDecisions(a)},error:Friendly.GenericErrorMessage}),!0)},Parenting.CheckChildDecision=function(a,b){var c="decisions";$.ajax({url:"/api/"+c+"?ChildId="+a.Id+"&format=json",type:"GET",success:function(d){$("#childName").text(a.Name),$("#childId").val(a.Id),Friendly.ClearForm(c),d.Decisions&&($('#DecisionsViewModel_Education[value="'+d.Decisions.Education+'"]').attr("checked","checked"),$('#DecisionsViewModel_HealthCare[value="'+d.Decisions.HealthCare+'"]').attr("checked","checked"),$('#DecisionsViewModel_Religion[value="'+d.Decisions.Religion+'"]').attr("checked","checked"),$('#DecisionsViewModel_ExtraCurricular[value="'+d.Decisions.ExtraCurricular+'"]').attr("checked","checked"),$("#DecisionsViewModel_BothResolve").val(d.Decisions.BothResolve)),$(".extra-decision-item").remove(),Friendly.childNdx++;if(Friendly.childNdx!==Friendly.children.length){if($("#"+c).valid()){Parenting.CheckChildDecision(Friendly.children[Friendly.childNdx],b);return}Friendly.ChildDecisionError.push(a.Name),Parenting.CheckChildDecision(Friendly.children[Friendly.childNdx],b);return}$("#decisions").valid()||Friendly.ChildDecisionError.push(a.Name),Friendly.ChildDecisionError.length>0?Friendly.NextForm(b,Friendly.properties.iconError):Friendly.NextForm(b,Friendly.properties.iconSuccess)},error:Friendly.GenericErrorMessage})},Parenting.SaveExtraDecisions=function(a){var b="extraDecisions";$.each($(".extra-decision-item"),function(c,d){var e=$(d).children("#extra-decision-Id").val(),f={Id:typeof a=="undefined"?e:0,ChildId:typeof a=="undefined"?$(d).children("#extra-decision-childId").val():a,DecisionMaker:$(d).find("input[name=ExtraDecisions"+e+"]:checked").val(),Description:$(d).children("#extra-decision-description").text().trim()};if(typeof a!="undefined"){$.ajax({url:"/api/"+b+"/"+a+"?format=json",type:"GET",success:function(a){$.each(a,function(a,b){b.Description===f.Description&&(f.Id=b.Id)}),$.ajax({url:"/api/"+b+"/?format=json",type:"POST",data:f,success:function(){},error:Friendly.GenericErrorMessage})},error:Friendly.GenericErrorMessage});return}$.ajax({url:"/api/"+b+"/?format=json",type:"POST",data:f,success:function(){},error:Friendly.GenericErrorMessage})})},Parenting.SetChildDecisions=function(a,b){$("#childName").text(a.Name),$("#childId").val(a.Id);if(typeof b.Decisions=="undefined")return!1;$('#DecisionsViewModel_Education[value="'+b.Decisions.Education+'"]').attr("checked","checked"),$('#DecisionsViewModel_HealthCare[value="'+b.Decisions.HealthCare+'"]').attr("checked","checked"),$('#DecisionsViewModel_Religion[value="'+b.Decisions.Religion+'"]').attr("checked","checked"),$('#DecisionsViewModel_ExtraCurricular[value="'+b.Decisions.ExtraCurricular+'"]').attr("checked","checked"),$("#DecisionsViewModel_BothResolve").val(b.Decisions.BothResolve),$(".extra-decision-item").remove(),$.each(b.ExtraDecisions,function(a,b){var c=$("#friendly-extraDecisions-template").tmpl(b);$("#radio-decisions").append(c)}),Parenting.CheckIfBothIsChecked(),b.Decisions.ExtraCurricular!==0&&$("#decisions").valid(),$("#decisionsWrapper").show()},Parenting.GetChildDecisions=function(a){var b="decisions";Friendly.ClearForm(b);var c=b+a.Id,d=$.jStorage.get(c);if(d){Parenting.SetChildDecisions(a,d);return}$.ajax({url:"/api/"+b+"?ChildId="+a.Id+"&format=json",type:"GET",success:function(b){Parenting.SetChildDecisions(a,b)},error:Friendly.GenericErrorMessage})},Parenting.CheckIfBothIsChecked=function(){var a=!1;$.each($("#decisions input[type=radio]"),function(b,c){var d=$(c).attr("id");$("#"+d+":checked").val()==="3"&&(a=!0)}),a?$(".decision-details").show():($("#DecisionsViewModel_BothResolve").val(""),$(".decision-details").hide())},Parenting.CheckChildHoliday=function(a,b){var c="holiday";$.ajax({url:"/api/"+c+"/"+a.Id+"?format=json",type:"GET",success:function(d){Parenting.SetChildHolidayForm(d,a),Friendly.childNdx++;if(Friendly.childNdx!==Friendly.children.length){if($("#"+c).valid()){Parenting.CheckChildHoliday(Friendly.children[Friendly.childNdx],b);return}Friendly.ChildDecisionError.push(a.Name),Parenting.CheckChildHoliday(Friendly.children[Friendly.childNdx],b);return}$("#"+c).valid()||Friendly.ChildHolidayError.push(a.Name),Friendly.ChildHolidayError.length>0?Friendly.NextForm(b,Friendly.properties.iconError):Friendly.NextForm(b,Friendly.properties.iconSuccess)},error:Friendly.GenericErrorMessage})},Parenting.AddHoliday=function(a){var b="holiday";a!=null&&$(a).hasClass("next")?Friendly.childNdx++:a!=null&&Friendly.childNdx--;var c=Friendly.GetFormInput(b),d=$("#holidayChildId").val();c.ChildId=d;var e=b+c.ChildId;if(!$("#"+b).valid()){var f={Holidays:c,ExtraHolidays:[]};return $.each($(".extra-holiday-item"),function(a,b){var c=$(b).children("#extra-holiday-Id").val(),e={Id:typeof d=="undefined"?c:0,ChildId:typeof d=="undefined"?$(b).children("#extra-holiday-childId").val():d,HolidayFather:$(b).find("input[name=HolidayFather"+c+"]:checked").val(),HolidayMother:$(b).find("input[name=HolidayMother"+c+"]:checked").val(),HolidayName:$(b).children(".extra-holiday-name").text()};f.ExtraHolidays.push(e)}),$.jStorage.set(e,f),!1}return $.jStorage.deleteKey(e),Parenting.SaveExtraHolidays(),a!=null&&$(a).hasClass("next")&&Friendly.childNdx===Friendly.children.length?(Friendly.SubmitForm("holiday","addendum",c),!0):a!=null&&$(a).hasClass("previous")&&Friendly.childNdx<0?(Friendly.SubmitForm("holiday","schedule",c),!0):(Friendly.StartLoading(),$.ajax({url:"/api/"+b+"?format=json",type:"POST",data:c,success:function(){$("html, body").animate({scrollTop:0},"fast");var a=Friendly.children[Friendly.childNdx];Parenting.GetChildHoliday(a),Friendly.EndLoading()},error:Friendly.GenericErrorMessage}),!0)},Parenting.GetChildHoliday=function(a){var b="holiday",c=b+a.Id,d=$.jStorage.get(c);if(d){Parenting.SetChildHolidayForm(d,a),$("#"+b).valid();return}$.ajax({url:"/api/"+b+"/"+a.Id+"?format=json",type:"GET",success:function(b){Parenting.SetChildHolidayForm(b,a),typeof b.Holidays!="undefined"&&b.Holidays.SpringBreakFather!==0&&$("#holiday").valid(),$("#holidayWrapper").show()},error:Friendly.GenericErrorMessage})},Parenting.SetChildHolidayForm=function(a,b){Friendly.ClearForm("holiday"),$("#holidayChildName").text(b.Name),$("#holidayChildId").val(b.Id);if(typeof a.Holidays=="undefined")return!1;a.Holidays.FridayHoliday?($("#HolidayViewModel_FridayHoliday").attr("checked","checked"),$("#HolidayViewModel_FridayHoliday").val("true")):$("#HolidayViewModel_FridayHoliday").val("false"),a.Holidays.MondayHoliday?($("#HolidayViewModel_MondayHoliday").attr("checked","checked"),$("#HolidayViewModel_MondayHoliday").val("true")):$("#HolidayViewModel_MondayHoliday").val("false"),$('#HolidayViewModel_Thanksgiving[value="'+a.Holidays.Thanksgiving+'"]').attr("checked","checked"),$("#HolidayViewModel_ThanksgivingOther").val(a.Holidays.ThanksgivingOther),$('#HolidayViewModel_Christmas[value="'+a.Holidays.Christmas+'"]').attr("checked","checked"),$("#HolidayViewModel_ChristmasTime").val(a.Holidays.ChristmasTime),$("#HolidayViewModel_ThanksgivingTime").val(a.Holidays.ThanksgivingTime),$("#HolidayViewModel_ChristmasOther").val(a.Holidays.ChristmasOther),$('#HolidayViewModel_SpringBreak[value="'+a.Holidays.SpringBreak+'"]').attr("checked","checked"),$("#HolidayViewModel_SpringOther").val(a.Holidays.SpringOther),$("#HolidayViewModel_SummerBeginDays").val(a.Holidays.SummerBeginDays),$("#HolidayViewModel_SummerBeginTime").val(a.Holidays.SummerBeginTime),$("#HolidayViewModel_SummerEndDays").val(a.Holidays.SummerEndDays),$("#HolidayViewModel_SummerEndTime").val(a.Holidays.SummerEndTime),$("#HolidayViewModel_SummerDetails").val(a.Holidays.SummerDetails),$('#HolidayViewModel_FallBreak[value="'+a.Holidays.FallBreak+'"]').attr("checked","checked"),$("#HolidayViewModel_FallOther").val(a.Holidays.FallOther),$('#HolidayViewModel_SpringBreakFather[value="'+a.Holidays.SpringBreakFather+'"]').attr("checked","checked"),$('#HolidayViewModel_SpringBreakMother[value="'+a.Holidays.SpringBreakMother+'"]').attr("checked","checked"),$('#HolidayViewModel_FallBreakFather[value="'+a.Holidays.FallBreakFather+'"]').attr("checked","checked"),$('#HolidayViewModel_FallBreakMother[value="'+a.Holidays.FallBreakMother+'"]').attr("checked","checked"),$('#HolidayViewModel_ThanksgivingFather[value="'+a.Holidays.ThanksgivingFather+'"]').attr("checked","checked"),$('#HolidayViewModel_ThanksgivingMother[value="'+a.Holidays.ThanksgivingMother+'"]').attr("checked","checked"),$('#HolidayViewModel_ChristmasFather[value="'+a.Holidays.ChristmasFather+'"]').attr("checked","checked"),$('#HolidayViewModel_ChristmasMother[value="'+a.Holidays.ChristmasMother+'"]').attr("checked","checked"),$('#HolidayViewModel_MlkFather[value="'+a.Holidays.MlkFather+'"]').attr("checked","checked"),$('#HolidayViewModel_MlkMother[value="'+a.Holidays.MlkMother+'"]').attr("checked","checked"),$('#HolidayViewModel_PresidentsFather[value="'+a.Holidays.PresidentsFather+'"]').attr("checked","checked"),$('#HolidayViewModel_PresidentsMother[value="'+a.Holidays.PresidentsMother+'"]').attr("checked","checked"),$('#HolidayViewModel_MothersFather[value="'+a.Holidays.MothersFather+'"]').attr("checked","checked"),$('#HolidayViewModel_MothersMother[value="'+a.Holidays.MothersMother+'"]').attr("checked","checked"),$('#HolidayViewModel_MemorialFather[value="'+a.Holidays.MemorialFather+'"]').attr("checked","checked"),$('#HolidayViewModel_MemorialMother[value="'+a.Holidays.MemorialMother+'"]').attr("checked","checked"),$('#HolidayViewModel_FathersFather[value="'+a.Holidays.FathersFather+'"]').attr("checked","checked"),$('#HolidayViewModel_FathersMother[value="'+a.Holidays.FathersMother+'"]').attr("checked","checked"),$('#HolidayViewModel_IndependenceFather[value="'+a.Holidays.IndependenceFather+'"]').attr("checked","checked"),$('#HolidayViewModel_IndependenceMother[value="'+a.Holidays.IndependenceMother+'"]').attr("checked","checked"),$('#HolidayViewModel_LaborFather[value="'+a.Holidays.LaborFather+'"]').attr("checked","checked"),$('#HolidayViewModel_LaborMother[value="'+a.Holidays.LaborMother+'"]').attr("checked","checked"),$('#HolidayViewModel_HalloweenFather[value="'+a.Holidays.HalloweenFather+'"]').attr("checked","checked"),$('#HolidayViewModel_HalloweenMother[value="'+a.Holidays.HalloweenMother+'"]').attr("checked","checked"),$('#HolidayViewModel_ChildrensFather[value="'+a.Holidays.ChildrensFather+'"]').attr("checked","checked"),$('#HolidayViewModel_ChildrensMother[value="'+a.Holidays.ChildrensMother+'"]').attr("checked","checked"),$('#HolidayViewModel_MothersBdayFather[value="'+a.Holidays.MothersBdayFather+'"]').attr("checked","checked"),$('#HolidayViewModel_MothersBdayMother[value="'+a.Holidays.MothersBdayMother+'"]').attr("checked","checked"),$('#HolidayViewModel_FathersBdayFather[value="'+a.Holidays.FathersBdayFather+'"]').attr("checked","checked"),$('#HolidayViewModel_FathersBdayMother[value="'+a.Holidays.FathersBdayMother+'"]').attr("checked","checked"),$('#HolidayViewModel_ReligiousFather[value="'+a.Holidays.ReligiousFather+'"]').attr("checked","checked"),$('#HolidayViewModel_ReligiousMother[value="'+a.Holidays.ReligiousMother+'"]').attr("checked","checked"),$(".extra-holiday-item").remove(),$.each(a.ExtraHolidays,function(a,b){var c=$("#friendly-extraHolidays-template").tmpl(b);$("#holiday").append(c)}),a.Holidays.ReligiousMother!==0&&$("#holiday").valid()},Parenting.SaveExtraHolidays=function(a){var b="extraHoliday";$.each($(".extra-holiday-item"),function(c,d){var e=$(d).children("#extra-holiday-Id").val(),f={Id:typeof a=="undefined"?e:0,ChildId:typeof a=="undefined"?$(d).children("#extra-holiday-childId").val():a,HolidayFather:$(d).find("input[name=HolidayFather"+e+"]:checked").val(),HolidayMother:$(d).find("input[name=HolidayMother"+e+"]:checked").val(),HolidayName:$(d).children(".extra-holiday-name").text()};if(typeof a!="undefined"){$.ajax({url:"/api/"+b+"/"+a+"?format=json",type:"GET",success:function(a){$.each(a,function(a,b){b.HolidayName===f.HolidayName&&(f.Id=b.Id)}),$.ajax({url:"/api/"+b+"?format=json",type:"POST",data:f,success:function(){},error:Friendly.GenericErrorMessage})},error:Friendly.GenericErrorMessage});return}$.ajax({url:"/api/"+b+"?format=json",type:"POST",data:f,success:function(){},error:Friendly.GenericErrorMessage})})}