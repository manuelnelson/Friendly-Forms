$(document).ready(function(){function c(c){a=[],$(".copy-button ul").empty(),$(".copy-button ul").append('<li><a title="all" data-id="0" href="#">All</a></li>'),$.each($(".child-table tbody tr"),function(b,c){var d={Name:$(c).find(".child-name").text(),DateOfBirth:$(c).find(".child-dob").text(),Id:$(c).find(".child-id").text().trim()};a.push(d),$(".copy-button ul").append('<li><a title="all" data-id="'+d.Id+'" href="#">'+d.Name+"</a></li>")}),b=0;var d=a[b];switch(c){case"decision":g(d);break;case"holiday":h(d)}}function d(a){e(a);var b=f(a);$.ajax({url:"/Forms/Decisions/",type:"POST",data:b,success:function(){},error:Friendly.GenericErrorMessage})}function e(a){$.each($(".extra-decision-item"),function(b,c){var d=$(c).children("#extra-decision-Id").val(),e={Id:typeof a=="undefined"?d:0,ChildId:typeof a=="undefined"?$(c).children("#extra-decision-childId").val():a,DecisionMaker:$(c).find("input[name=ExtraDecisions"+d+"]:checked").val(),Description:$(c).children("#extra-decision-description").text().trim()};if(typeof a!="undefined"){$.ajax({url:"/Forms/GetChildDecision/"+a,type:"GET",success:function(a){$.each(a.ExtraDecisions,function(a,b){b.Description===e.Description&&(e.Id=b.Id)}),$.ajax({url:"/Forms/ExtraDecisions/",type:"POST",data:e,success:function(){},error:Friendly.GenericErrorMessage})},error:Friendly.GenericErrorMessage});return}$.ajax({url:"/Forms/ExtraDecisions/",type:"POST",data:e,success:function(){},error:Friendly.GenericErrorMessage})})}function f(a){return{Education:$("#DecisionsViewModel_Education:checked").val(),HealthCare:$("#DecisionsViewModel_HealthCare:checked").val(),Religion:$("#DecisionsViewModel_Religion:checked").val(),ExtraCurricular:$("#DecisionsViewModel_ExtraCurricular:checked").val(),ChildId:typeof a=="undefined"?$("#childId").val():a}}function g(a){$.ajax({url:"/Forms/GetChildDecision/"+a.Id,type:"GET",success:function(b){$("#childName").text(a.Name),$("#childId").val(a.Id),$('#DecisionsViewModel_Education[value="'+b.Decisions.Education+'"]').attr("checked","checked"),$('#DecisionsViewModel_HealthCare[value="'+b.Decisions.HealthCare+'"]').attr("checked","checked"),$('#DecisionsViewModel_Religion[value="'+b.Decisions.Religion+'"]').attr("checked","checked"),$('#DecisionsViewModel_ExtraCurricular[value="'+b.Decisions.ExtraCurricular+'"]').attr("checked","checked"),$(".extra-decision-item").remove(),$.each(b.ExtraDecisions,function(a,b){var c=$("#friendly-extraDecisions-template").tmpl(b);$("#decisions").append(c)}),$("#decisionsWrapper").show(),$(".decision-item").addClass("active")},error:Friendly.GenericErrorMessage})}function h(a){$.ajax({url:"/Forms/GetChildHoliday/"+a.Id,type:"GET",success:function(b){Friendly.ClearForm("holiday"),$("#holidayChildName").text(a.Name),$("#holidayChildId").val(a.Id),b.Holidays.FridayHoliday&&$("#HolidayViewModel_FridayHoliday").attr("checked","checked"),b.Holidays.MondayHoliday&&$("#HolidayViewModel_MondayHoliday").attr("checked","checked"),$('#HolidayViewModel_Thanksgiving[value="'+b.Holidays.Thanksgiving+'"]').attr("checked","checked"),$("#HolidayViewModel_ThanksgivingOther").val(b.Holidays.ThanksgivingOther),$('#HolidayViewModel_Christmas[value="'+b.Holidays.Christmas+'"]').attr("checked","checked"),$("#HolidayViewModel_ChristmasTime").val(b.Holidays.ChristmasTime),$("#HolidayViewModel_SpringBreakTime").val(b.Holidays.SpringBreakTime),$("#HolidayViewModel_FallBreakTime").val(b.Holidays.FallBreakTime),$("#HolidayViewModel_ThanksgivingTime").val(b.Holidays.ThanksgivingTime),$("#HolidayViewModel_ChristmasOther").val(b.Holidays.ChristmasOther),$('#HolidayViewModel_SpringBreak[value="'+b.Holidays.SpringBreak+'"]').attr("checked","checked"),$("#HolidayViewModel_SpringOther").val(b.Holidays.SpringOther),$("#HolidayViewModel_SummerBeginDays").val(b.Holidays.SummerBeginDays),$("#HolidayViewModel_SummerBeginTime").val(b.Holidays.SummerBeginTime),$("#HolidayViewModel_SummerEndDays").val(b.Holidays.SummerEndDays),$("#HolidayViewModel_SummerEndTime").val(b.Holidays.SummerEndTime),$("#HolidayViewModel_SummerDetails").val(b.Holidays.SummerDetails),$('#HolidayViewModel_FallBreak[value="'+b.Holidays.FallBreak+'"]').attr("checked","checked"),$("#HolidayViewModel_FallOther").val(b.Holidays.FallOther),$('#HolidayViewModel_SpringBreakFather[value="'+b.Holidays.SpringBreakFather+'"]').attr("checked","checked"),$('#HolidayViewModel_SpringBreakMother[value="'+b.Holidays.SpringBreakMother+'"]').attr("checked","checked"),$('#HolidayViewModel_FallBreakFather[value="'+b.Holidays.FallBreakFather+'"]').attr("checked","checked"),$('#HolidayViewModel_FallBreakMother[value="'+b.Holidays.FallBreakMother+'"]').attr("checked","checked"),$('#HolidayViewModel_ThanksgivingFather[value="'+b.Holidays.ThanksgivingFather+'"]').attr("checked","checked"),$('#HolidayViewModel_ThanksgivingMother[value="'+b.Holidays.ThanksgivingMother+'"]').attr("checked","checked"),$('#HolidayViewModel_ChristmasFather[value="'+b.Holidays.ChristmasFather+'"]').attr("checked","checked"),$('#HolidayViewModel_ChristmasMother[value="'+b.Holidays.ChristmasMother+'"]').attr("checked","checked"),$('#HolidayViewModel_MlkFather[value="'+b.Holidays.MlkFather+'"]').attr("checked","checked"),$('#HolidayViewModel_MlkMother[value="'+b.Holidays.MlkMother+'"]').attr("checked","checked"),$('#HolidayViewModel_PresidentsFather[value="'+b.Holidays.PresidentsFather+'"]').attr("checked","checked"),$('#HolidayViewModel_PresidentsMother[value="'+b.Holidays.PresidentsMother+'"]').attr("checked","checked"),$('#HolidayViewModel_MothersFather[value="'+b.Holidays.MothersFather+'"]').attr("checked","checked"),$('#HolidayViewModel_MothersMother[value="'+b.Holidays.MothersMother+'"]').attr("checked","checked"),$('#HolidayViewModel_MemorialFather[value="'+b.Holidays.MemorialFather+'"]').attr("checked","checked"),$('#HolidayViewModel_MemorialMother[value="'+b.Holidays.MemorialMother+'"]').attr("checked","checked"),$('#HolidayViewModel_FathersFather[value="'+b.Holidays.FathersFather+'"]').attr("checked","checked"),$('#HolidayViewModel_FathersMother[value="'+b.Holidays.FathersMother+'"]').attr("checked","checked"),$('#HolidayViewModel_IndependenceFather[value="'+b.Holidays.IndependenceFather+'"]').attr("checked","checked"),$('#HolidayViewModel_IndependenceMother[value="'+b.Holidays.IndependenceMother+'"]').attr("checked","checked"),$('#HolidayViewModel_LaborFather[value="'+b.Holidays.LaborFather+'"]').attr("checked","checked"),$('#HolidayViewModel_LaborMother[value="'+b.Holidays.LaborMother+'"]').attr("checked","checked"),$('#HolidayViewModel_HalloweenFather[value="'+b.Holidays.HalloweenFather+'"]').attr("checked","checked"),$('#HolidayViewModel_HalloweenMother[value="'+b.Holidays.HalloweenMother+'"]').attr("checked","checked"),$('#HolidayViewModel_ChildrensFather[value="'+b.Holidays.ChildrensFather+'"]').attr("checked","checked"),$('#HolidayViewModel_ChildrensMother[value="'+b.Holidays.ChildrensMother+'"]').attr("checked","checked"),$('#HolidayViewModel_MothersBdayFather[value="'+b.Holidays.MothersBdayFather+'"]').attr("checked","checked"),$('#HolidayViewModel_MothersBdayMother[value="'+b.Holidays.MothersBdayMother+'"]').attr("checked","checked"),$('#HolidayViewModel_FathersBdayFather[value="'+b.Holidays.FathersBdayFather+'"]').attr("checked","checked"),$('#HolidayViewModel_FathersBdayMother[value="'+b.Holidays.FathersBdayMother+'"]').attr("checked","checked"),$('#HolidayViewModel_ReligiousFather[value="'+b.Holidays.ReligiousFather+'"]').attr("checked","checked"),$('#HolidayViewModel_ReligiousMother[value="'+b.Holidays.ReligiousMother+'"]').attr("checked","checked"),$(".extra-holiday-item").remove(),$.each(b.ExtraHolidays,function(a,b){var c=$("#friendly-extraHolidays-template").tmpl(b);$("#holiday").append(c)}),$("#holidayWrapper").show(),$(".holiday-item").addClass("active")},error:Friendly.GenericErrorMessage})}function i(a,b){switch(b){case"1":$("#"+a+'[value="2"]').attr("checked","checked");break;case"2":$("#"+a+'[value="1"]').attr("checked","checked");break;case"3":$("#"+a+'[value="4"]').attr("checked","checked");break;case"4":$("#"+a+'[value="3"]').attr("checked","checked")}}function j(a){$.each($(".extra-holiday-item"),function(b,c){var d=$(c).children("#extra-holiday-Id").val(),e={Id:typeof a=="undefined"?d:0,ChildId:typeof a=="undefined"?$(c).children("#extra-holiday-childId").val():a,HolidayFather:$(c).find("input[name=HolidayFather"+d+"]:checked").val(),HolidayMother:$(c).find("input[name=HolidayMother"+d+"]:checked").val(),HolidayName:$(c).children(".extra-holiday-name").text()};if(typeof a!="undefined"){$.ajax({url:"/Forms/GetChildHoliday/"+a,type:"GET",success:function(a){$.each(a.ExtraHolidays,function(a,b){b.HolidayName===e.HolidayName&&(e.Id=b.Id)}),$.ajax({url:"/Forms/ExtraHolidays/",type:"POST",data:e,success:function(){},error:Friendly.GenericErrorMessage})},error:Friendly.GenericErrorMessage});return}$.ajax({url:"/Forms/ExtraHolidays/",type:"POST",data:e,success:function(){},error:Friendly.GenericErrorMessage})})}function k(a){j(a);var b=Friendly.GetFormInput("holiday");b.ChildId=a,b.FridayHoliday=$("#HolidayViewModel_FridayHoliday").is(":checked"),b.MondayHoliday=$("#HolidayViewModel_MondayHoliday").is(":checked"),$.ajax({url:"/Forms/Holidays/",type:"POST",data:b,success:function(){},error:Friendly.GenericErrorMessage})}$("input[name=NeedPrivacy]").change(function(){$("#NeedPrivacy:checked").val()==="1"?$("#detailsWrapper").show():$("#detailsWrapper").hide()}),$(".child-part4").click(function(){$(this).hasClass("next")&&Friendly.SubmitForm("privacy","information")}),$(".child-part5").click(function(){Friendly.StartLoading();var a=Friendly.GetFormInput("information");c("decision");var b="information",d="decisions",e="#"+b;if($(e).valid())$.ajax({url:"/Forms/"+b+"/",type:"POST",data:a,success:function(){return Friendly.NextForm(d),Friendly.EndLoading(),!1},error:Friendly.GenericErrorMessage});else return Friendly.EndLoading(),!1;return!1}),$("#addDecisions").click(function(){Friendly.StartLoading();var a="extraDecisions",b={ChildId:$("#childId").val().trim(),DecisionMaker:$("#ExtraDecisionsViewModel_DecisionMaker:checked").val(),Description:$("#ExtraDecisionsViewModel_Description").val()};if($("#"+a).valid())$.ajax({url:"/Forms/"+a+"/",type:"POST",data:b,success:function(a){var b=$("#friendly-extraDecisions-template").tmpl(a);return $("#decisions").append(b),$("input[id=ExtraDecisionsViewModel_DecisionMaker]").removeAttr("checked"),$("#ExtraDecisionsViewModel_Description").val(""),Friendly.EndLoading(),!1},error:Friendly.GenericErrorMessage});else return Friendly.EndLoading(),!1;return!1});var a=[],b;$(".decision-item").click(function(){c("decision"),Friendly.NextForm("decision")}),$(".dropdown-toggle").dropdown(),$("#copy-decisions").on("click","li a",function(){if(!$("#decisions").valid())return!1;var b=$(this).attr("data-id");if(b==="0")for(var c=0;c<a.length;c++){var e=a[c];d(e.Id)}else d(b)}),$(".child-part6").click(function(){if(!$("#decisions").valid())return!1;e();var c=f();return $(this).hasClass("next")?b++:b--,$(this).hasClass("next")&&b===a.length?(Friendly.SubmitForm("decisions","responsibility",c),!1):$(this).hasClass("previous")&&b<0?(Friendly.SubmitForm("decisions","information",c),!1):($.ajax({url:"/Forms/Decisions/",type:"POST",data:c,success:function(){$("html, body").animate({scrollTop:0},"fast"),$("input[id=DecisionsViewModel_Education]").removeAttr("checked"),$("input[id=DecisionsViewModel_HealthCare]").removeAttr("checked"),$("input[id=DecisionsViewModel_Religion]").removeAttr("checked"),$("input[id=DecisionsViewModel_ExtraCurricular]").removeAttr("checked");var c=a[b];g(c)},error:Friendly.GenericErrorMessage}),!1)}),$("input[name=TransportationCosts]").change(function(){var a=$("#TransportationCosts:checked").val();$(".responsibility-percentage").hide(),$(".responsibility-cost").hide(),$(".responsibility-percentage input").val("0"),$(".responsibility-cost input").val("");switch(a){case"3":$(".responsibility-percentage").show(),$(".responsibility-percentage input").val("");break;case"4":$(".responsibility-cost").show()}}),$(".responsibility-percentage input").focusout(function(){var a=$(this).val();$(this).attr("id")==="FatherPercentage"?$("#MotherPercentage").val(parseInt(100-a)):$("#FatherPercentage").val(parseInt(100-a))}),$(".child-part7").click(function(){var a={BeginningVisitation:$("#BeginningVisitation:checked").val(),EndVisitation:$("#EndVisitation:checked").val(),TransportationCosts:$("#TransportationCosts:checked").val(),FatherPercentage:0,MotherPercentage:0,OtherDetails:""};a.TransportationCosts==="3"&&(a.FatherPercentage=$("#FatherPercentage").val(),a.MotherPercentage=$("#MotherPercentage").val()),a.TransportationCosts==="4"&&(a.OtherDetails=$("#OtherDetails").val()),Friendly.SubmitForm("responsibility","communication",a)}),$("#Other").change(function(){$(this).is(":checked")?$(".communicate-other").show():$(".communicate-other").hide()}),$("input[name=Limitations]").change(function(){var a=$("#Limitations:checked").val();a=="1"?$(".communicate-method").show():$(".communicate-method").hide()}),$(".child-part8").click(function(){Friendly.SubmitForm("communication","schedule")}),$("input[name=DetermineBeginDate]").change(function(){var a=$("#DetermineBeginDate:checked").val();a==="1"?$(".schedule-date").hide():$(".schedule-date").show()}),$("input[name=Weekdays]").change(function(){var a=$("#Weekdays:checked").val();a==="1"?$(".schedule-weekday").show():$(".schedule-weekday").hide()}),$("input[name=FatherWeekend]").change(function(){var a=$("#FatherWeekend:checked").val();$(".schedule-weekend-other").hide();switch(a){case"1":$('#MotherWeekend[value="1"]').attr("checked","checked");break;case"2":$('#MotherWeekend[value="4"]').attr("checked","checked");break;case"3":$('#MotherWeekend[value="4"]').attr("checked","checked");break;case"4":$('#MotherWeekend[value="3"]').attr("checked","checked");break;case"5":$('#MotherWeekend[value="5"]').attr("checked","checked"),$(".schedule-weekend-other").show()}}),$("input[name=MotherWeekend]").change(function(){var a=$("#MotherWeekend:checked").val();$(".schedule-weekend-other").hide();switch(a){case"1":$('#FatherWeekend[value="1"]').attr("checked","checked");break;case"2":$('#FatherWeekend[value="4"]').attr("checked","checked");break;case"3":$('#FatherWeekend[value="4"]').attr("checked","checked");break;case"4":$('#FatherWeekend[value="3"]').attr("checked","checked");break;case"5":$('#FatherWeekend[value="5"]').attr("checked","checked"),$(".schedule-weekend-other").show()}}),$(".child-part9").click(function(){var a=Friendly.GetFormInput("schedule"),b="schedule",d="holiday",e="#"+b;if($(e).valid())$.ajax({url:"/Forms/"+b+"/",type:"POST",data:a,success:function(){return c("holiday"),Friendly.NextForm(d),Friendly.EndLoading(),!1},error:Friendly.GenericErrorMessage});else return Friendly.EndLoading(),!1;return!1}),$("#addHolidays").click(function(){Friendly.StartLoading();var a="extraHolidays",b={ChildId:$("#holidayChildId").val(),HolidayFather:$("#ExtraHolidayViewModel_HolidayFather:checked").val(),HolidayMother:$("#ExtraHolidayViewModel_HolidayMother:checked").val(),HolidayName:$("#ExtraHolidayViewModel_HolidayName").val()};if($("#"+a).valid())$.ajax({url:"/Forms/"+a+"/",type:"POST",data:b,success:function(a){var b=$("#friendly-extraHolidays-template").tmpl(a);return $("#holiday").append(b),$("input[id=ExtraHolidayViewModel_HolidayFather]").removeAttr("checked"),$("input[id=ExtraHolidayViewModel_HolidayMother]").removeAttr("checked"),$("#ExtraHolidayViewModel_HolidayName").val(""),Friendly.EndLoading(),!1},error:Friendly.GenericErrorMessage});else return Friendly.EndLoading(),!1;return!1}),$(".father-all input[type=radio]").change(function(){var a=$(this).attr("name"),b=$('input[name="'+a+'"]:checked').val();$.each($(".holiday-parent input[value="+b+"]"),function(a,c){var d=$(c).attr("name");if(typeof d=="undefined")return;d.lastIndexOf("Father")>=0&&d.lastIndexOf("Father")>d.lastIndexOf("Mother")?$(this).attr("checked","checked"):(d=d.replace(".","_"),i(d,b))})}),$(".mother-all input[type=radio]").change(function(){var a=$(this).attr("name"),b=$('input[name="'+a+'"]:checked').val();$.each($(".holiday-parent input[value="+b+"]"),function(a,c){var d=$(c).attr("name");if(typeof d=="undefined")return;d.lastIndexOf("Mother")>=0&&d.lastIndexOf("Mother")>d.lastIndexOf("Father")?$(this).attr("checked","checked"):(d=d.replace(".","_"),i(d,b))})}),$(".holiday-parent input[type=radio]").on("change",function(){var a=$(this).attr("name"),b=$('input[name="'+a+'"]:checked').val(),c="";return a.lastIndexOf("Father")>=0&&a.lastIndexOf("Father")>a.lastIndexOf("Mother")?(c=a.substring(0,a.lastIndexOf("Father"))+"Mother",c=c.replace(".","_")):a.lastIndexOf("Mother")>=0&&a.lastIndexOf("Mother")>a.lastIndexOf("Father")&&(c=a.substring(0,a.lastIndexOf("Mother"))+"Father",c=c.replace(".","_")),i(c,b),!1}),$(".child-part10").click(function(){if($("#holiday").valid()){j();var c=Friendly.GetFormInput("holiday");return c.ChildId=$("#holidayChildId").val(),c.FridayHoliday=$("#HolidayViewModel_FridayHoliday").is(":checked"),c.MondayHoliday=$("#HolidayViewModel_MondayHoliday").is(":checked"),$(this).hasClass("next")?b++:b--,$(this).hasClass("next")&&b===a.length?(Friendly.SubmitForm("holiday","holiday",c),!1):$(this).hasClass("previous")&&b<0?(Friendly.SubmitForm("holiday","schedule",c),!1):(Friendly.StartLoading(),$.ajax({url:"/Forms/Holidays/",type:"POST",data:c,success:function(){$("#holiday")[0].reset(),$("html, body").animate({scrollTop:0},"fast");var c=a[b];h(c),Friendly.EndLoading()},error:Friendly.GenericErrorMessage}),!1)}}),$('input[name="HolidayViewModel.Thanksgiving"]').change(function(){var a=$("#HolidayViewModel_Thanksgiving:checked").val();a==="3"?$(".thanksgiving-other").show():$(".thanksgiving-other").hide()}),$('input[name="HolidayViewModel.SpringBreak"]').change(function(){var a=$("#HolidayViewModel_SpringBreak:checked").val();a==="2"?$(".spring-other").show():$(".spring-other").hide()}),$('input[name="HolidayViewModel.FallBreak"]').change(function(){var a=$("#HolidayViewModel_FallBreak:checked").val();a==="2"?$(".fall-other").show():$(".fall-other").hide()}),$('input[name="HolidayViewModel.Christmas"]').change(function(){var a=$("#HolidayViewModel_Christmas:checked").val();$(".christmas-items").hide(),$(".christmas-other").hide();switch(a){case"2":$(".christmas-items").show();break;case"3":$(".christmas-items").show();break;case"4":$(".christmas-items").show();break;case"5":$(".christmas-other").show()}}),$(".holiday-item").click(function(){Friendly.NextForm("holiday"),c("holiday")}),$("#copy-holidays").on("click","li a",function(){if(!$("#holiday").valid())return;var b=$(this).attr("data-id");if(b==="0")for(var c=0;c<a.length;c++){var d=a[c];k(d.Id)}else k(b)})})