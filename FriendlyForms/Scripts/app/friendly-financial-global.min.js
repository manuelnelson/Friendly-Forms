window.Financial=window.Financial||{},Financial.GetChildCare=function(a){var b="childCare";$.ajax({url:"/api/"+b+"?ChildId="+a.Id+"&format=json",type:"GET",success:function(c){var d=$("#"+b);d.empty(),c===""&&(c={}),c.Name=a.Name,c.ChildId=a.Id;var e=$("#friendly-childCare-template").tmpl(c);d.append(e),d.valid()},error:Friendly.GenericErrorMessage})},Financial.AddChildCare=function(a,b){var c="childCare";a!=null&&$(a).hasClass("next")?Friendly.childNdx++:a!=null&&Friendly.childNdx--,$.each($("#"+c+" input[type=text]"),function(a,b){$(b).val()===""&&$(b).val(0)});var d=Friendly.GetFormInput(c);$("#ChildId").val()&&(d.ChildId=$("#ChildId").val().trim());var e=c+d.ChildId;if(!$("#"+c).valid())return $.jStorage.set(e,d),!1;$.jStorage.deleteKey(e);if(a!=null&&$(a).hasClass("next")&&Friendly.childNdx===Friendly.children.length)return Friendly.SubmitForm(c,"extraExpense",d),!0;var f="POST";return typeof d.Id!="undefined"&&d.Id!="0"&&d.Id!=""?f="PUT":d.Id=0,$.ajax({url:"/api/"+c+"/?format=json",type:f,data:d,success:function(){if(b==null||!b){$("html, body").animate({scrollTop:0},"fast");var a=Friendly.children[Friendly.childNdx];Financial.GetChildCare(a)}},error:Friendly.GenericErrorMessage}),!0},Financial.CheckChildCare=function(a,b){var c="childCare";$.ajax({url:"/api/"+c+"?ChildId="+a.Id+"&format=json",type:"GET",success:function(d){Friendly.ClearForm(c),Friendly.childNdx++,d.Name=a.Name;var e=$("#friendly-childCare-template").tmpl(d),f=$("#"+c);f.append(e);if(Friendly.childNdx!==Friendly.children.length){if(f.valid()){Financial.CheckChildCare(Friendly.children[Friendly.childNdx],b);return}Friendly.ChildCareError.push(a.Name),Financial.CheckChildCare(Friendly.children[Friendly.childNdx],b);return}f.valid()||Friendly.ChildCareError.push(a.Name),Friendly.ChildCareError.length>0?Friendly.NextForm(b,Friendly.properties.iconError):Friendly.NextForm(b,Friendly.properties.iconSuccess)},error:Friendly.GenericErrorMessage})},Financial.GetExtraExpense=function(a){var b="extraExpense";$.ajax({url:"/api/"+b+"?ChildId="+a.Id+"&format=json",type:"GET",success:function(c){var d=$("#"+b);d.empty(),c===""&&(c={}),c.Name=a.Name,c.ChildId=a.Id;var e=$("#friendly-"+b+"-template").tmpl(c);d.append(e),d.valid()},error:Friendly.GenericErrorMessage})},Financial.AddExtraExpense=function(a,b){var c="extraExpense";a!=null&&$(a).hasClass("next")?Friendly.childNdx++:a!=null&&Friendly.childNdx--,$.each($("#"+c+" input[type=text]"),function(a,b){$(b).val()===""&&$(b).val(0)});var d=Friendly.GetFormInput(c);d.ChildId=$("#ChildId").val().trim();var e=c+d.ChildId;if(!$("#"+c).valid())return $.jStorage.set(e,d),!1;$.jStorage.deleteKey(e);if(a!=null&&$(a).hasClass("next")&&Friendly.childNdx===Friendly.children.length)return Friendly.SubmitForm(c,"healths",d),!0;if(a!=null&&$(a).hasClass("previous")&&Friendly.childNdx<0)return Friendly.SubmitForm(c,"childCare",d),!0;var f="POST";return typeof d.Id!="undefined"&&d.Id!="0"&&d.Id!=""?f="PUT":d.Id=0,$.ajax({url:"/api/"+c+"/?format=json",type:f,data:d,success:function(){if(b==null||!b){$("html, body").animate({scrollTop:0},"fast");var a=Friendly.children[Friendly.childNdx];Financial.GetExtraExpense(a)}},error:Friendly.GenericErrorMessage}),!0},Financial.CheckExtraExpense=function(a,b){var c="extraExpense";$.ajax({url:"/api/"+c+"?ChildId="+a.Id+"&format=json",type:"GET",success:function(d){Friendly.ClearForm(c),Friendly.childNdx++,d.Name=a.Name;var e=$("#friendly-"+c+"-template").tmpl(d),f=$("#"+c);f.append(e);if(Friendly.childNdx!==Friendly.children.length){if(f.valid()){Financial.CheckExtraExpense(Friendly.children[Friendly.childNdx],b);return}Friendly.ExtraExpenseError.push(a.Name),Financial.CheckExtraExpense(Friendly.children[Friendly.childNdx],b);return}f.valid()||Friendly.ExtraExpenseError.push(a.Name),Friendly.ExtraExpenseError.length>0?Friendly.NextForm(b,Friendly.properties.iconError):Friendly.NextForm(b,Friendly.properties.iconSuccess)},error:Friendly.GenericErrorMessage})},Financial.GetDeviations=function(a){var b="deviations";$.ajax({url:"/api/"+b+"?ChildId="+a.Id+"&format=json",type:"GET",success:function(c){var d=$("#"+b);d.empty(),c===""&&(c={}),c.Name=a.Name,c.ChildId=a.Id;var e=$("#friendly-deviations-template").tmpl(c);d.append(e),d.valid()},error:Friendly.GenericErrorMessage})},Financial.AddDeviations=function(a,b){var c="deviations";a!=null&&$(a).hasClass("next")?Friendly.childNdx++:a!=null&&Friendly.childNdx--,$.each($("#"+c+" input[type=text]"),function(a,b){$(b).val()===""&&$(b).val(0)});var d=Friendly.GetFormInput(c);d.ChildId=$("#deviations #ChildId").val().trim();var e=c+d.ChildId;if(!$("#"+c).valid())return $.jStorage.set(e,d),!1;$.jStorage.deleteKey(e);if(a!=null&&$(a).hasClass("next")&&Friendly.childNdx===Friendly.children.length)return Friendly.SubmitForm(c,"income",d),!0;if(a!=null&&$(a).hasClass("previous")&&Friendly.childNdx<0)return Friendly.SubmitForm(c,"healths",d),!0;var f="POST";return typeof d.Id!="undefined"&&d.Id!="0"&&d.Id!=""?f="PUT":d.Id=0,$.ajax({url:"/api/"+c+"/?format=json",type:f,data:d,success:function(){if(b==null||!b){$("html, body").animate({scrollTop:0},"fast");var a=Friendly.children[Friendly.childNdx];Financial.GetDeviations(a)}},error:Friendly.GenericErrorMessage}),!0},Financial.CheckDeviations=function(a,b){var c="deviations";$.ajax({url:"/api/"+c+"?ChildId="+a.Id+"&format=json",type:"GET",success:function(d){Friendly.ClearForm(c),Friendly.childNdx++,d.Name=a.Name;var e=$("#friendly-"+c+"-template").tmpl(d),f=$("#"+c);f.append(e);if(Friendly.childNdx!==Friendly.children.length){if(f.valid()){Financial.CheckDeviations(Friendly.children[Friendly.childNdx],b);return}Friendly.DeviationsError.push(a.Name),Financial.CheckDeviations(Friendly.children[Friendly.childNdx],b);return}f.valid()||Friendly.DeviationsError.push(a.Name),Friendly.DeviationsError.length>0?Friendly.NextForm(b,Friendly.properties.iconError):Friendly.NextForm(b,Friendly.properties.iconSuccess)},error:Friendly.GenericErrorMessage})},Financial.GetDeviationsOther=function(a){var b="deviationsOther";$.ajax({url:"/api/deviations?ChildId="+a.Id+"&isOtherParent=true&format=json",type:"GET",success:function(c){var d=$("#"+b);d.empty(),c===""&&(c={}),c.Name=a.Name,c.ChildId=a.Id;var e=$("#friendly-deviations-template").tmpl(c);d.append(e),d.valid()},error:Friendly.GenericErrorMessage})},Financial.AddDeviationsOther=function(a,b){var c="deviationsOther";a!=null&&$(a).hasClass("next")?Friendly.childNdx++:a!=null&&Friendly.childNdx--,$.each($("#"+c+" input[type=text]"),function(a,b){$(b).val()===""&&$(b).val(0)});var d=Friendly.GetFormInput(c);d.ChildId=$("#"+c+" #ChildId").val().trim();var e=c+d.ChildId;if(!$("#"+c).valid())return $.jStorage.set(e,d),!1;$.jStorage.deleteKey(e);if(a!=null&&$(a).hasClass("next")&&Friendly.childNdx===Friendly.children.length)return Friendly.SubmitForm(c,"incomeOther",d),!0;if(a!=null&&$(a).hasClass("previous")&&Friendly.childNdx<0)return Friendly.SubmitForm(c,"otherChildren",d),!0;var f="POST";return typeof d.Id!="undefined"&&d.Id!="0"&&d.Id!=""?f="PUT":d.Id=0,$.ajax({url:"/api/deviations/?format=json",type:f,data:d,success:function(){if(b==null||!b){$("html, body").animate({scrollTop:0},"fast");var a=Friendly.children[Friendly.childNdx];Financial.GetDeviationsOther(a)}},error:Friendly.GenericErrorMessage}),!0},Financial.CheckDeviationsOther=function(a,b){var c="deviations";$.ajax({url:"/api/deviations?ChildId="+a.Id+"&isOtherParent=true&format=json",type:"GET",success:function(d){Friendly.ClearForm(c),Friendly.childNdx++,d.Name=a.Name;var e=$("#friendly-"+c+"-template").tmpl(d),f=$("#"+c);f.append(e);if(Friendly.childNdx!==Friendly.children.length){if(f.valid()){Financial.CheckDeviationsOther(Friendly.children[Friendly.childNdx],b);return}Friendly.DeviationsErrorOther.push(a.Name),Financial.CheckDeviationsOther(Friendly.children[Friendly.childNdx],b);return}f.valid()||Friendly.DeviationsErrorOther.push(a.Name),Friendly.DeviationsErrorOther.length>0?Friendly.NextForm(b,Friendly.properties.iconError):Friendly.NextForm(b,Friendly.properties.iconSuccess)},error:Friendly.GenericErrorMessage})}